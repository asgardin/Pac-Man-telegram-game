<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Pac-Man TMA</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcome-screen" class="screen active">
        <div class="welcome-container">
            <div class="pacman-welcome">
                <div class="pacman-character yellow"></div>
                <div class="speech-bubble">
                    <p>–ü—Ä–∏–≤–µ—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –Ω–∞—à—É –∏–≥—Ä—É. –£ –Ω–∞—Å –µ—Å—Ç—å –±–æ–Ω—É—Å ‚Äî —Å–æ–±–µ—Ä–∏ 50 –º–æ–Ω–µ—Ç –∏ –ø–æ–ª—É—á–∏ –µ–≥–æ! –ù–∞–¥–µ—é—Å—å, —Ç–µ–±–µ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è.</p>
                </div>
            </div>
            <button class="btn-primary" onclick="showCharacterSelect()">Next</button>
        </div>
    </div>

    <!-- Character Select Screen -->
    <div id="character-screen" class="screen">
        <div class="character-container">
            <h2>–í—ã–±–µ—Ä–∏ —Å–≤–æ–µ–≥–æ –ü–∞–∫–º–∞–Ω–∞</h2>
            <div class="character-grid">
                <div class="character-option" data-color="yellow" onclick="selectCharacter('yellow')">
                    <div class="pacman-character yellow"></div>
                    <span>–ñ—ë–ª—Ç—ã–π</span>
                </div>
                <div class="character-option" data-color="red" onclick="selectCharacter('red')">
                    <div class="pacman-character red"></div>
                    <span>–ö—Ä–∞—Å–Ω—ã–π</span>
                </div>
                <div class="character-option" data-color="blue" onclick="selectCharacter('blue')">
                    <div class="pacman-character blue"></div>
                    <span>–°–∏–Ω–∏–π</span>
                </div>
                <div class="character-option" data-color="green" onclick="selectCharacter('green')">
                    <div class="pacman-character green"></div>
                    <span>–ó–µ–ª—ë–Ω—ã–π</span>
                </div>
            </div>
            <button class="btn-primary" id="play-btn" onclick="startGame()" disabled>Play</button>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <div class="game-header">
            <div class="score">–ú–æ–Ω–µ—Ç—ã: <span id="score">0</span></div>
            <div class="level">–£—Ä–æ–≤–µ–Ω—å: <span id="level">1</span></div>
            <div class="lives">–ñ–∏–∑–Ω–∏: <span id="lives">3</span></div>
        </div>
        <canvas id="game-canvas"></canvas>
        <div class="game-controls">
            <div class="control-pad">
                <button class="control-btn up" ontouchstart="handleTouch('up')" ontouchend="handleTouchEnd()">‚Üë</button>
                <div class="control-row">
                    <button class="control-btn left" ontouchstart="handleTouch('left')" ontouchend="handleTouchEnd()">‚Üê</button>
                    <button class="control-btn right" ontouchstart="handleTouch('right')" ontouchend="handleTouchEnd()">‚Üí</button>
                </div>
                <button class="control-btn down" ontouchstart="handleTouch('down')" ontouchend="handleTouchEnd()">‚Üì</button>
            </div>
        </div>
    </div>

    <!-- Bonus Modal -->
    <div id="bonus-modal" class="modal">
        <div class="modal-content">
            <div class="bonus-animation">üéâ</div>
            <h2>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
            <p>–¢—ã —Å–æ–±—Ä–∞–ª 50 –º–æ–Ω–µ—Ç –∏ –ø–æ–ª—É—á–∏–ª –±–æ–Ω—É—Å: 50 FS! –ß—Ç–æ–±—ã –∑–∞–±—Ä–∞—Ç—å, –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.</p>
            <button class="btn-bonus" onclick="claimBonus()">–ó–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å</button>
            <button class="btn-secondary" onclick="closeBonusModal()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>

    <!-- Ad Screen -->
    <div id="ad-screen" class="screen">
        <div class="ad-container">
            <div class="ad-header">
                <h3>–†–µ–∫–ª–∞–º–∞</h3>
                <div class="ad-timer">–û—Å—Ç–∞–ª–æ—Å—å: <span id="ad-timer">30</span>—Å</div>
            </div>
            <div class="ad-content">
                <div class="spinning-logo">
                    <div class="casino-logo">üé∞</div>
                    <h2>–ö–ê–ó–ò–ù–û</h2>
                    <p>–ò–≥—Ä–∞–π –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π!</p>
                </div>
            </div>
            <button class="btn-primary" id="skip-ad-btn" onclick="skipAd()" disabled>–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameover-screen" class="screen">
        <div class="gameover-container">
            <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
            <div class="final-score">–°–æ–±—Ä–∞–Ω–æ –º–æ–Ω–µ—Ç: <span id="final-score">0</span></div>
            <button class="btn-primary" onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
            <button class="btn-secondary" onclick="showWelcome()">–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
